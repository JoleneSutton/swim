<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Distribution of sampling weights • swim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Distribution of sampling weights">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">swim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/distribution_of_sampling_weights.html">Distribution of sampling weights</a></li>
    <li><a class="dropdown-item" href="../articles/figure2.html">Figure 2</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/JoleneSutton/swim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Distribution of sampling weights</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JoleneSutton/swim/blob/master/vignettes/distribution_of_sampling_weights.Rmd" class="external-link"><code>vignettes/distribution_of_sampling_weights.Rmd</code></a></small>
      <div class="d-none name"><code>distribution_of_sampling_weights.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette shows step-by-step examples of how to distribute
hypothetical sampling weights over a reference spatial grid.</p>
<p>First, sampling weights are generated based on distance from the
shoreline. Spatial grid cells within 10 km, 30 km, and 50 km of the
shoreline are assigned sampling weights of 1, 0.15, and 0.01
respectively. Grid cells beyond 50 km are assigned sampling weights of
0.</p>
<p>Next, sampling weights are generated based on depth. Spatial grid
cells that have median depths of 10-20 m, and 20-50 m are assigned
sampling weights of 1 and 0.5, respectively.</p>
<p>Finally, the two different sampling weights area combined to produce
a single sampling weight for each spatial grid cell.</p>
</div>
<div class="section level2">
<h2 id="r-packages">R packages<a class="anchor" aria-label="anchor" href="#r-packages"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JoleneSutton/swim" class="external-link">swim</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/eblondel/zen4R" class="external-link">zen4R</a></span><span class="op">)</span> <span class="co">#to access SWIM example shapefiles stored on Zenodo</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dieghernan.github.io/tidyterra/" class="external-link">tidyterra</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-swim-example-shapefiles">Load SWIM example shapefiles<a class="anchor" aria-label="anchor" href="#load-swim-example-shapefiles"></a>
</h2>
<p>These files are stored on Zenodo at <a href="https://zenodo.org/records/18165445" class="external-link uri">https://zenodo.org/records/18165445</a>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sw_example_shapefiles.html">sw_example_shapefiles</a></span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="co">#TRUE will create a folder to save these files in your working directory</span></span>
<span><span class="co">#&gt; Fetching SWIM example shapefiles from https://zenodo.org/records/18165445.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Successfully fetched list of published records - page 1 (size = 10)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Successfully fetched list of published records!</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Successfully fetched record for id '18165445'!</span></span>
<span><span class="co">#&gt; Found 6 files in zenodo record 18165445</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">buffer10</span>,<span class="va">buffer30</span>,<span class="va">buffer50</span>,<span class="va">nafo_4t</span><span class="op">)</span><span class="co">#We only need some of them for this vignette</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "coast_coarse" "ref_grid"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examine-the-reference-spatial-grid">Examine the reference spatial grid<a class="anchor" aria-label="anchor" href="#examine-the-reference-spatial-grid"></a>
</h2>
<p>The reference spatial grid used here originated from <a href="https://publications.gc.ca/collections/collection_2020/mpo-dfo/Fs97-6-3348-eng.pdf" class="external-link">Koropatnick
&amp; Coffen-Smout (2020)</a>. It was cropped to the Northwest Atlantic
Fisheries Organization (<a href="https://www.nafo.int/" class="external-link">NAFO</a>)
Division 4T, and a median depth was assigned to each grid cell based on
the General Bathymetric Chart of the Oceans (<a href="https://www.gebco.net/" class="external-link">GEBCO</a>) 2024.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ref_grid</span></span>
<span><span class="co">#&gt;  class       : SpatVector </span></span>
<span><span class="co">#&gt;  geometry    : polygons </span></span>
<span><span class="co">#&gt;  dimensions  : 11124, 5  (geometries, attributes)</span></span>
<span><span class="co">#&gt;  extent      : 1864640, 2608453, 1092588, 1564352  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt;  coord. ref. : Canada_Albers_Equal_Area_Conic (ESRI:102001) </span></span>
<span><span class="co">#&gt;  names       :  OBJECTID  GRID_ID depth.med  nafo  area</span></span>
<span><span class="co">#&gt;  type        :     &lt;num&gt;    &lt;chr&gt;     &lt;num&gt; &lt;chr&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt;  values      :  2.57e+05 ATD-1220     9.867    4T  7.84</span></span>
<span><span class="co">#&gt;                2.581e+05 ATE-1219     4.908    4T 8.762</span></span>
<span><span class="co">#&gt;                2.581e+05 ATF-1219     10.57    4T 9.833</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ref_grid</span><span class="op">)</span></span></code></pre></div>
<p><img src="distribution_of_sampling_weights_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level2">
<h2 id="distance-from-shoreline-sampling-weights">Distance from shoreline sampling weights<a class="anchor" aria-label="anchor" href="#distance-from-shoreline-sampling-weights"></a>
</h2>
<p>Spatial grid cells within 10 km, 30 km, and 50 km of the shoreline
are assigned hypothetical sampling weights of 1, 0.15, and 0.01
respectively. Grid cells beyond 50 km are assigned sampling weights of
0.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">buffers</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>,<span class="fl">30</span>,<span class="fl">10</span><span class="op">)</span><span class="co">#km</span></span>
<span><span class="va">weights</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>,<span class="fl">0.15</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">ref_grid</span><span class="op">$</span><span class="va">dist.wght</span><span class="op">&lt;-</span><span class="fl">0</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">buffers</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">buf</span><span class="op">&lt;-</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/buffer.html" class="external-link">buffer</a></span><span class="op">(</span><span class="va">coast_coarse</span>,<span class="va">buffers</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">*</span><span class="fl">1000</span><span class="op">)</span></span>
<span>  <span class="va">index</span><span class="op">&lt;-</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/intersect.html" class="external-link">intersect</a></span><span class="op">(</span><span class="va">ref_grid</span>,<span class="va">buf</span><span class="op">)</span></span>
<span>  <span class="va">ref_grid</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">ref_grid</span><span class="op">$</span><span class="va">OBJECTID</span><span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span><span class="va">index</span><span class="op">$</span><span class="va">OBJECTID</span><span class="op">)</span>,<span class="st">'dist.wght'</span><span class="op">]</span><span class="op">&lt;-</span><span class="va">weights</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span><span class="va">ref_grid</span></span>
<span><span class="co">#&gt;  class       : SpatVector </span></span>
<span><span class="co">#&gt;  geometry    : polygons </span></span>
<span><span class="co">#&gt;  dimensions  : 11124, 6  (geometries, attributes)</span></span>
<span><span class="co">#&gt;  extent      : 1864640, 2608453, 1092588, 1564352  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt;  coord. ref. : Canada_Albers_Equal_Area_Conic (ESRI:102001) </span></span>
<span><span class="co">#&gt;  names       :  OBJECTID  GRID_ID depth.med  nafo  area dist.wght</span></span>
<span><span class="co">#&gt;  type        :     &lt;num&gt;    &lt;chr&gt;     &lt;num&gt; &lt;chr&gt; &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt;  values      :  2.57e+05 ATD-1220     9.867    4T  7.84         1</span></span>
<span><span class="co">#&gt;                2.581e+05 ATE-1219     4.908    4T 8.762         1</span></span>
<span><span class="co">#&gt;                2.581e+05 ATF-1219     10.57    4T 9.833         1</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">ref_grid</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">dist.wght</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>direction<span class="op">=</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="distribution_of_sampling_weights_files/figure-html/unnamed-chunk-4-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level2">
<h2 id="depth-sampling-weights">Depth sampling weights<a class="anchor" aria-label="anchor" href="#depth-sampling-weights"></a>
</h2>
<p>Spatial grid cells that have median depths of 10-20 m, and 20-50 m
are assigned hypothetical sampling weights of 1 and 0.5, respectively.
All other grid cells are assigned sampling weights of 0.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">start.depths</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">stop.depths</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>,<span class="fl">50</span><span class="op">)</span></span>
<span><span class="va">weights</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">ref_grid</span><span class="op">$</span><span class="va">depth.wght</span><span class="op">&lt;-</span><span class="fl">0</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">start.depths</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">index</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">ref_grid</span><span class="op">$</span><span class="va">depth.med</span><span class="op">&gt;=</span><span class="va">start.depths</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">&amp;</span><span class="va">ref_grid</span><span class="op">$</span><span class="va">depth.med</span><span class="op">&lt;</span><span class="va">stop.depths</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="va">ref_grid</span><span class="op">[</span><span class="va">index</span>,<span class="st">'depth.wght'</span><span class="op">]</span><span class="op">&lt;-</span><span class="va">weights</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">ref_grid</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">depth.wght</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>direction<span class="op">=</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<p><img src="distribution_of_sampling_weights_files/figure-html/unnamed-chunk-5-1.png" class="r-plt" alt="" width="700"></p>
</div>
<div class="section level2">
<h2 id="combine-sampling-weights">Combine sampling weights<a class="anchor" aria-label="anchor" href="#combine-sampling-weights"></a>
</h2>
<p>In this hypothetical example, the distance from shore and depth
sampling weights are multiplied to produce a single sampling weight for
each grid cell.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ref_grid</span><span class="op">$</span><span class="va">wght</span><span class="op">&lt;-</span><span class="va">ref_grid</span><span class="op">$</span><span class="va">dist.wght</span><span class="op">*</span><span class="va">ref_grid</span><span class="op">$</span><span class="va">depth.wght</span></span>
<span></span>
<span><span class="co">#for plotting purposes, change values of zero to NA</span></span>
<span><span class="va">ref_grid</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">ref_grid</span><span class="op">$</span><span class="va">wght</span><span class="op">==</span><span class="fl">0</span><span class="op">)</span>,<span class="st">'wght'</span><span class="op">]</span><span class="op">&lt;-</span><span class="cn">NA</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://dieghernan.github.io/tidyterra/reference/ggspatvector.html" class="external-link">geom_spatvector</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">ref_grid</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill<span class="op">=</span><span class="va">wght</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>direction<span class="op">=</span><span class="op">-</span><span class="fl">1</span>,na.value <span class="op">=</span> <span class="st">'white'</span><span class="op">)</span></span></code></pre></div>
<p><img src="distribution_of_sampling_weights_files/figure-html/unnamed-chunk-6-1.png" class="r-plt" alt="" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jolene T. Sutton, Jenni L. McDermid, Stephanie Ratelle.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
